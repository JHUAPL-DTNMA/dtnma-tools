# Test Set 1: Standard Reports.
#
# Assume nm_mgr is on ipn:1.1
# Assume nm_agent is on ipn:1.2
# Assume ipn:1.0 is available

###################################################
# Test Case 1 Generate Reports.
###################################################

#------------------------------------------------------------------------------
# Step 1.1: Generate Agent ADM Full Report.
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.gen_rpts([ari:/IANA:amp.agent/Rptt.full_report()],[])
#
#------------------------------------------------------------------------------
c11541050502252381871819410000
WAIT 1

#------------------------------------------------------------------------------
# Step 1.2: Verify ADM report received and correct.
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
# Step 1.3 Generate the BP Full Report.
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.gen_rpts([ari:/IANA:bp.agent/Rptt.full_report()],[])
#
#------------------------------------------------------------------------------
c1154105050225238127456167656e744449414e4100
WAIT 1

#------------------------------------------------------------------------------
# Step 1.4: Verify BP Report received and correct.
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
# Step 1.5: Generate ADM Report and BP Report Concurrently.
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.gen_rpts(
#         [ari:/IANA:amp.agent/Rptt.full_report(), 
#          ari:/IANA:bp.agent/Rptt.full_report()],[])
#
#------------------------------------------------------------------------------
c11541050502252382871819410027456167656e744449414e4100
WAIT 1

#------------------------------------------------------------------------------
# Step 1.6: Verify both reports received and correct.
#------------------------------------------------------------------------------

###################################################
# Test Case 2: Generate parameterized reports
###################################################

#------------------------------------------------------------------------------
# Step 2.1: Generate Endpoint report for endpoint ipn:1.1
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.gen_rpts(
#       [ari:/IANA:dtn.bp_agent/Rptt.endpoint_report(ipn:1.1)],[])
#
#------------------------------------------------------------------------------
c11541050502252381c7182d41010501126769706e3a312e3100
WAIT 5


#------------------------------------------------------------------------------
# Step 2.2: Verify endpoint report received for selected endpoint
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
# Step 2.3 Generate Endpoint report for 3 endpoints:
#              ipn:1.0, 
#              ipn:1.1, 
#              ipn:1.2
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.gen_rpts(
#         [ari:/IANA:dtn.bp_agent/Rptt.endpoint_report(ipn:1.0), 
#          ari:/IANA:dtn.bp_agent/Rptt.endpoint_report(ipn:1.1), 
#          ari:/IANA:dtn.bp_agent/Rptt.endpoint_report(ipn:1.2)], [])
#
#------------------------------------------------------------------------------
c11541050502252383c7182d41010501126769706e3a312e30c7182d41010501126769706e3a312e31c7182d41010501126769706e3a312e3200
WAIT 5

#------------------------------------------------------------------------------
# Step 2.4: Verify endpoint reports received for the three endpoints:
#           ipn:1.0
#           ipn:1.1
#           ipn:1.2
#------------------------------------------------------------------------------


###################################################
# Test Case 3: Report on basic elements 
###################################################

#------------------------------------------------------------------------------
# Step 3.1: Generate Report that has specified EDD in it.
#           EDD selected is NUM_TBL_TPLS defined by the AMP Agent ADM
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.gen_rpts([ari:/IANA:amp.agent/Edd.num_tbl_tpls],[])
#
#------------------------------------------------------------------------------
c115410505022523818216410100
WAIT 1

#------------------------------------------------------------------------------
# Step 3.2: Verify report received and correct.
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
# Step 3.3: Generate Report that has specified VAR in it.
#           VAR selected is NUM_RULES defined by the AMP Agent ADM
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.gen_rpts([ari:/IANA:amp.agent/Var.num_rules],[])
#
#------------------------------------------------------------------------------
c115410505022523818c181d410000
WAIT 1

#------------------------------------------------------------------------------
# Step 3.4: Verify report received and correct.
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
# Step 3.5 Generate two report at once: with EDD and VAR in it.
#          EDD selected is NUM_TBL_TPLS defined by the AMP Agent ADM
#          VAR selected is NUM_RULES defined by the AMP Agent ADM
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.gen_rpts(
#         [ari:/IANA:amp.agent/Edd.num_tbl_tpls, 
#          ari:/IANA:amp.agent/Var.num_rules], [])
#
#------------------------------------------------------------------------------
c11541050502252382821641018c181d410000
WAIT 1

#------------------------------------------------------------------------------
# Step 3.6: Verify report received and correct
#------------------------------------------------------------------------------


###################################################
# Test Case 4: Report templates 
###################################################

#------------------------------------------------------------------------------
# Step 4.1: Add a report template (R1) that provides the number of table 
#           templates (num_tbl_tpls) and number of report templates 
#           (num_rpt_tpls) known to the Agent.
#
#------------------------------------------------------------------------------
#
# Type: Report Template (rptt)
# Nickname (NN): 1
# Issuer (ISS): 1 
# Name: R1
# RPTT ARI: ari:/1:1/Rptt.R1
# CBOR RPTT ARI: 0x3742523141314131
#
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.add_rptt(ari:/1:1/Rptt.R1, 
#        [ari:/IANA:amp.agent/Edd.num_tbl_tpls, 
#         ari:/IANA:amp.agent/Edd.num_rpt_tpls])
#
#------------------------------------------------------------------------------
c1154102050224253742523141314131828216410182164100
WAIT 1

#------------------------------------------------------------------------------
# Step 4.2: Describe the Report Template (rptt) R1
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.desc_rptt([ari:/1:1/Rptt.R1])
#
#------------------------------------------------------------------------------
c1154104050125813742523141314131
WAIT 1

#------------------------------------------------------------------------------
# Step 4.3: Reboot Manager and verify report loads from SDR.
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
# Step 4.4: Generate a table of all known report templates.
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.gen_tbls([ari:/IANA:amp.agent/Tblt.rptts], [])
#
#------------------------------------------------------------------------------
c115410605022523818a181b410200
WAIT 1

#------------------------------------------------------------------------------
# Step 4.5: Request Report R1.
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.gen_rpts([ari:/1:1/Rptt.R1], [])
#
#------------------------------------------------------------------------------
c11541050502252381374252314131413100
WAIT 1

#------------------------------------------------------------------------------
# Step 4.6: Reboot Agent and make sure R1 is read back from SDR.
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
# Step 4.7: Generate a table of all known report templates and make sure 
#           R1 still exists.
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.gen_tbls([ari:/IANA:amp.agent/Tblt.rptts], [])
#
#------------------------------------------------------------------------------
c115410605022523818a181b410200
WAIT 1

#------------------------------------------------------------------------------
# Step 4.8: Delete R1
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.del_rptt([ari:/1:1/Rptt.R1])
#
#------------------------------------------------------------------------------
c1154103050125813742523141314131
WAIT 1

#------------------------------------------------------------------------------
# Step 4.9: Generate a table of all known report templates and make sure 
#            R1 has been deleted (is not represented in the table).
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.gen_tbls([ari:/IANA:amp.agent/Tblt.rptts], [])
#
#------------------------------------------------------------------------------
c115410605022523818a181b410200
WAIT 1

#------------------------------------------------------------------------------
# Step 4.10: Reboot Agent and make sure R1 does not come back.
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
# Step 4.11: Generate a table of all known report templates and make sure 
#            R1 is not represented in the table.
#------------------------------------------------------------------------------
#
# ARI: ari:/IANA:amp.agent/Ctrl.gen_tbls([ari:/IANA:amp.agent/Tblt.rptts], [])
#
#------------------------------------------------------------------------------
c115410605022523818a181b410200
WAIT 1

###################################################
# Test Case 5: Describe Report
###################################################

#------------------------------------------------------------------------------
# Step 5.1: Describe the AMP Agent FUll report.
#------------------------------------------------------------------------------
#
# ari:/IANA:amp.agent/Ctrl.desc_rptt(ari:/IANA:amp.agent/Rptt.full_report())
#
#------------------------------------------------------------------------------
c1154104050125818718194100
WAIT 1